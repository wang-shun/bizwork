<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sogou.bizwork.dao.UserDao">

<!-- 
    <resultMap id="userMap" type="com.sogou.bizdev.yunguan.mobile.bo.User">
        <id column="id" property="id" jdbcType="INTEGER" />
        <result column="username" property="username" jdbcType="VARCHAR" />
        <result column="client_ids" property="clientIds" jdbcType="VARCHAR" />
        <result column="login_time" property="loginTime" jdbcType="TIMESTAMP" />
        <result column="logout_time" property="logoutTime" jdbcType="TIMESTAMP" />
    </resultMap>

    <select id="getUserByName" resultMap="userMap">
        SELECT * FROM `user` WHERE `username` = #{username};
    </select>

    <insert id="addUser" parameterType="com.sogou.bizdev.yunguan.mobile.bo.User">
        INSERT INTO `user` ( `username`, `status`, `client_ids`, `login_time` )
        VALUE ( #{username}, #{status}, #{clientIds}, NOW() );
    </insert>

    <update id="updateLoginInfo">
        UPDATE `user`
        SET `client_ids`= #{clientIds}, `login_time` = NOW()
        WHERE `username` = #{username};
    </update>
    
    <update id="updateLogoutInfo">
        UPDATE `user`
        SET `logout_time` = NOW()
        WHERE `username` = #{username};
    </update>
 -->    
</mapper>